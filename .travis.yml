# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r
language: python
python:
  - "3.6"

os:
  - linux

before_install:
  - wget --no-check-certificate https://archive.data.jhu.edu/api/access/datafile/1311?gbrecs=true -O 01.tar.xz
  - tar xvf 01.tar.xz
  - mkdir -p input 
  - mv 01/BRAIN_1_Anonymized.nii.gz input/image.nii.gz
  - mkdir -p output
  - mkdir -p weights
  - cd weights
  - wget -O weights.zip https://www.dropbox.com/s/v2ptd9mfpo13gcb/mistie_2-20200122T175000Z-001.zip?dl=1
  - unzip -j weights.zip 
  - for i in _*; do out=`echo ${i} | sed "s/_/./"`; mv ${i} ${out}; done
  - ls -a 
  - cd ..

install:
  - pip install -r requirements.txt
  - pip install https://github.com/ANTsX/ANTsPy/releases/download/v0.1.4/antspy-0.1.4-cp36-cp36m-linux_x86_64.whl

  # - pip install git+git://github.com/ANTsX/ANTsPy.git

# command to run tests
script:
  - python3 predict.py --verbose --indir ./input --outdir ./output --weights ./weights